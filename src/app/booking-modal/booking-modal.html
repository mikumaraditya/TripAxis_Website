<div class="modal-overlay" *ngIf="isOpen" (click)="close()">
  
    <div class="modal-content" (click)="onModalContentClick($event)">
      <button class="modal-close-btn" (click)="close()" aria-label="Close modal">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      
      <h2 class="auth-title">Book Your Dream Trip</h2>
      
      <div class="item-details" *ngIf="displayItem.title">
        <h3>{{ displayItem.title }}</h3>
        <p class="item-price">{{ displayItem.price | currency:'INR':'symbol-narrow':'1.0-0' }}
          
          <span *ngIf="displayItem.durationDays" class="item-duration">
             / {{ displayItem.durationDays }} Days
          </span>

        </p>
      </div>
      <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()" class="auth-form">
        
        <div class="form-group">
          <label for="fullName">Full Name</label>
          <input id="fullName" type="text" formControlName="fullName" placeholder="Enter your full name">
          <div *ngIf="bookingForm.get('fullName')?.touched && bookingForm.get('fullName')?.invalid" class="error-text">
            Full name is required.
          </div>
        </div>
  
        <div class="form-group">
          <label for="email">Email Address</label>
          <input id="email" type="email" formControlName="email" placeholder="your.email@example.com">
          <div *ngIf="bookingForm.get('email')?.touched && bookingForm.get('email')?.invalid" class="error-text">
            Please enter a valid email address.
          </div>
        </div>

        <div class="form-group">
          <label for="phoneNumber">Phone Number</label>
          <input id="phoneNumber" type="tel" formControlName="phoneNumber" placeholder="10-digit mobile number">
          <div *ngIf="bookingForm.get('phoneNumber')?.touched && bookingForm.get('phoneNumber')?.invalid" class="error-text">
            <span *ngIf="bookingForm.get('phoneNumber')?.errors?.['required']">Phone number is required.</span>
            <span *ngIf="bookingForm.get('phoneNumber')?.errors?.['pattern']">Please enter a valid 10-digit number.</span>
          </div>
        </div>
  
        <div class="form-group">
          <label for="travelDate">Travel Start Date</label>
          <input id="travelDate" type="date" formControlName="travelDate" [min]="minDate">
          <div *ngIf="bookingForm.get('travelDate')?.touched && bookingForm.get('travelDate')?.invalid" class="error-text">
            <span *ngIf="bookingForm.get('travelDate')?.errors?.['required']">Please select a travel date.</span>
            <span *ngIf="bookingForm.get('travelDate')?.errors?.['pastDate']">Please select a future date.</span>
          </div>
        </div>

        <div class="form-group">
          <label for="endDate">Travel End Date</label>
          <input id="endDate" type="date" formControlName="endDate" [min]="minDate">
        </div>

        <div class="form-group">
          <label for="travelers">Number of Travelers</label>
          <input id="travelers" type="number" formControlName="travelers" min="1" max="20" placeholder="1">
          <div *ngIf="bookingForm.get('travelers')?.touched && bookingForm.get('travelers')?.invalid" class="error-text">
            Must be at least 1 traveler.
          </div>
        </div>
        
        <button type="submit" class="auth-button" [disabled]="bookingForm.invalid || isProcessing">
          <span *ngIf="!isProcessing && bookingForm.invalid">Please fill all fields</span>
          <span *ngIf="!isProcessing && !bookingForm.invalid">ðŸš€ Confirm Booking</span>
          <span *ngIf="isProcessing" class="spinner-wrapper">
            <div class="button-spinner"></div>
            Processing...
          </span>
        </button>
        </form>
  
    </div>
  </div>